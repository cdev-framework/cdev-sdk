{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "lamda_function.schema.json",
    "type": "object",
    "reference_name": "BACKEND_LAMBDA",
    "required": [
        "resource",
        "Runtime", 
        "History"
    ],
    "properties": {
        "resource": {
            "$id": "#/properties/resource",
            "$ref": "../resource.schema.json",
            "type": "object"
        },
        "Runtime": {
            "$id": "#/properties/Runtime",
            "type": "string",
            "enum": ["python3.6", "python3.7", "python3.8"]
        },
        "FunctionName": {
            "type": "string"
        },
        "Role":{
            "type": "string"
        },
        "Handler":{
            "type": "string"
        },
        "Code":{
            "type": "object",
            "properties": {
                "S3Bucket": {"type": "string"},
                "S3Key": {"type": "string"}
            }
        },
        "History": {
            "type": "array",
            "items": {
                "anyOf": [
                    {"$ref": "./lambda_create_function.schema.json"},
                    {"$ref": "./lambda_create_eventsource.schema.json"},
                    {"$ref": "./lambda_update_function_code.schema.json"},
                    {"$ref": "./lambda_update_function_configuration.schema.json"},
                    {"$ref": "./lambda_update_eventsource.schema.json"}
                ]
                
            }
        }
    }
}