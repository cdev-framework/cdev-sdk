import typing
from pydantic.main import BaseModel
from enum import Enum
from typing import List


from ...constructs import Cdev_Resource
from ...models import Cloud_Output, Rendered_Resource
from ...utils import hasher




class ScalarAttributeType(str, Enum): 

    S = "S"
    N = "N"
    B = "B"


class AttributeDefinition(BaseModel):

    AttributeName: str

    AttributeType: AttributeType




class KeyType(str, Enum): 

    HASH = "HASH"
    RANGE = "RANGE"


class KeySchemaElement(BaseModel):

    AttributeName: str

    KeyType: KeyType




class ProjectionType(str, Enum): 

    ALL = "ALL"
    KEYS_ONLY = "KEYS_ONLY"
    INCLUDE = "INCLUDE"



class Projection(BaseModel):

    ProjectionType: ProjectionType

    NonKeyAttributes: List[NonKeyAttributeName]



class LocalSecondaryIndex(BaseModel):

    IndexName: str

    KeySchema: List[KeySchemaElement]

    Projection: Projection



class ProvisionedThroughput(BaseModel):

    ReadCapacityUnits: {'type': 'long', 'min': 1}

    WriteCapacityUnits: {'type': 'long', 'min': 1}



class GlobalSecondaryIndex(BaseModel):

    IndexName: str

    KeySchema: List[KeySchemaElement]

    Projection: Projection

    ProvisionedThroughput: ProvisionedThroughput



class BillingMode(str, Enum): 

    PROVISIONED = "PROVISIONED"
    PAY_PER_REQUEST = "PAY_PER_REQUEST"


class StreamViewType(str, Enum): 

    NEW_IMAGE = "NEW_IMAGE"
    OLD_IMAGE = "OLD_IMAGE"
    NEW_AND_OLD_IMAGES = "NEW_AND_OLD_IMAGES"
    KEYS_ONLY = "KEYS_ONLY"


class StreamSpecification(BaseModel):

    StreamEnabled: bool

    StreamViewType: StreamViewType



class SSEType(str, Enum): 

    AES256 = "AES256"
    KMS = "KMS"



class SSESpecification(BaseModel):

    Enabled: bool

    SSEType: SSEType

    KMSMasterKeyId: str





class Tag(BaseModel):

    Key: str

    Value: str



class CreateTableInput(BaseModel):

    AttributeDefinitions: List[AttributeDefinition]

    TableName: str

    KeySchema: List[KeySchemaElement]

    LocalSecondaryIndexes: List[LocalSecondaryIndex]

    GlobalSecondaryIndexes: List[GlobalSecondaryIndex]

    BillingMode: BillingMode

    ProvisionedThroughput: ProvisionedThroughput

    StreamSpecification: StreamSpecification

    SSESpecification: SSESpecification

    Tags: List[Tag]




